<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="/mainstyle.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
     
    <meta name="description" content="Free online sudoku solver">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Solver | Solve sudoku free online</title>
  </head>

  <body>
    <button class="title menuToggle"><img src='/images/puzzle.svg' />Puzzle Menu</button>
    <header>
      <a class="headerLink " href="/index.html"><img src='/images/spellingbee.svg'/><span>Spelling Bee</span></a>
      <a class="headerLink " href="/letterboxed/index.html"><img src='/images/letterboxed.svg'/><span>Letter Boxed</span></a>
      <a class="headerLink active" href="/sudoku/index.html"><img src='/images/sudoku.svg'/><span>Sudoku</span></a>
    </header>
    <span class="title">Puzzle Solver</span>
    
    <div class="pageContainer">
      <div class="puzzleContainer">

        <div class="puzzle">
          <div class="ninesquare">
            <input type="number" id="square1" min="1" max="9"></input>
            <input type="number" id="square2" min="1" max="9"></input>
            <input type="number" id="square3" min="1" max="9"></input>
            <input type="number" id="square10" min="1" max="9"></input>
            <input type="number" id="square11" min="1" max="9"></input>
            <input type="number" id="square12" min="1" max="9"></input>
            <input type="number" id="square19" min="1" max="9"></input>
            <input type="number" id="square20" min="1" max="9"></input>
            <input type="number" id="square21" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square4" min="1" max="9"></input>
            <input type="number" id="square5" min="1" max="9"></input>
            <input type="number" id="square6" min="1" max="9"></input>
            <input type="number" id="square13" min="1" max="9"></input>
            <input type="number" id="square14" min="1" max="9"></input>
            <input type="number" id="square15" min="1" max="9"></input>
            <input type="number" id="square22" min="1" max="9"></input>
            <input type="number" id="square23" min="1" max="9"></input>
            <input type="number" id="square24" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square7" min="1" max="9"></input>
            <input type="number" id="square8" min="1" max="9"></input>
            <input type="number" id="square9" min="1" max="9"></input>
            <input type="number" id="square16" min="1" max="9"></input>
            <input type="number" id="square17" min="1" max="9"></input>
            <input type="number" id="square18" min="1" max="9"></input>
            <input type="number" id="square25" min="1" max="9"></input>
            <input type="number" id="square26" min="1" max="9"></input>
            <input type="number" id="square27" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square28" min="1" max="9"></input>
            <input type="number" id="square29" min="1" max="9"></input>
            <input type="number" id="square30" min="1" max="9"></input>
            <input type="number" id="square37" min="1" max="9"></input>
            <input type="number" id="square38" min="1" max="9"></input>
            <input type="number" id="square39" min="1" max="9"></input>
            <input type="number" id="square46" min="1" max="9"></input>
            <input type="number" id="square47" min="1" max="9"></input>
            <input type="number" id="square48" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square31" min="1" max="9"></input>
            <input type="number" id="square32" min="1" max="9"></input>
            <input type="number" id="square33" min="1" max="9"></input>
            <input type="number" id="square40" min="1" max="9"></input>
            <input type="number" id="square41" min="1" max="9"></input>
            <input type="number" id="square42" min="1" max="9"></input>
            <input type="number" id="square49" min="1" max="9"></input>
            <input type="number" id="square50" min="1" max="9"></input>
            <input type="number" id="square51" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square34" min="1" max="9"></input>
            <input type="number" id="square35" min="1" max="9"></input>
            <input type="number" id="square36" min="1" max="9"></input>
            <input type="number" id="square43" min="1" max="9"></input>
            <input type="number" id="square44" min="1" max="9"></input>
            <input type="number" id="square45" min="1" max="9"></input>
            <input type="number" id="square52" min="1" max="9"></input>
            <input type="number" id="square53" min="1" max="9"></input>
            <input type="number" id="square54" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square55" min="1" max="9"></input>
            <input type="number" id="square56" min="1" max="9"></input>
            <input type="number" id="square57" min="1" max="9"></input>
            <input type="number" id="square64" min="1" max="9"></input>
            <input type="number" id="square65" min="1" max="9"></input>
            <input type="number" id="square66" min="1" max="9"></input>
            <input type="number" id="square73" min="1" max="9"></input>
            <input type="number" id="square74" min="1" max="9"></input>
            <input type="number" id="square75" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square58" min="1" max="9"></input>
            <input type="number" id="square59" min="1" max="9"></input>
            <input type="number" id="square60" min="1" max="9"></input>
            <input type="number" id="square67" min="1" max="9"></input>
            <input type="number" id="square68" min="1" max="9"></input>
            <input type="number" id="square69" min="1" max="9"></input>
            <input type="number" id="square76" min="1" max="9"></input>
            <input type="number" id="square77" min="1" max="9"></input>
            <input type="number" id="square78" min="1" max="9"></input>
          </div>

          <div class="ninesquare">
            <input type="number" id="square61" min="1" max="9"></input>
            <input type="number" id="square62" min="1" max="9"></input>
            <input type="number" id="square63" min="1" max="9"></input>
            <input type="number" id="square70" min="1" max="9"></input>
            <input type="number" id="square71" min="1" max="9"></input>
            <input type="number" id="square72" min="1" max="9"></input>
            <input type="number" id="square79" min="1" max="9"></input>
            <input type="number" id="square80" min="1" max="9"></input>
            <input type="number" id="square81" min="1" max="9"></input>
          </div>
        </div>

        <input type="submit" value="Solve" id="solveButton"/>
      </div>
    </div>
  </body>

  <script>
    const buildPuzzle = () => {
      let puzzle = []
      let currRow = -1
      for (let i = 0; i <= 80; i++) {
        if (i % 9 == 0) {
          currRow += 1
          puzzle.push([])
        }

        const squareElem = document.querySelector(`#square${i + 1}`)
        if (squareElem.value) {
          puzzle[currRow].push(parseInt(squareElem.value))
          squareElem.classList.add('solved')
        } else {
          puzzle[currRow].push(null)
          squareElem.classList.add('inactive')
        }
      }

      return puzzle
    }

    const solve = () => {
      const puzzle = buildPuzzle()
      if (!checkPuzzle(puzzle)) {
        alert("Puzzle isn't valid!")
        return
      }
      const solvedPuzzle = findSolution(puzzle)

      window.setTimeout(() => {
        document.querySelector("#solveButton").value = "Solve"

        if (!solvedPuzzle) {
          document.querySelectorAll('input[type="number"]').forEach(elem => elem.classList.remove('solved'))
          document.querySelectorAll('input[type="number"]').forEach(elem => elem.classList.remove('inactive'))
          alert("No solutions found!")
          return
        }

        let currSquare = 0
        for (let row of solvedPuzzle) {
          for (let square of row) {
            const squareElem = document.querySelector(`#square${currSquare + 1}`)
            squareElem.value = square
            squareElem.classList.remove('inactive')
            currSquare += 1
          }
        }
      }, 250)
    }

    document.querySelector("#solveButton").addEventListener('click', (e) => {
      e.target.value = "Thinking..."
      window.setTimeout(solve, 100)
    })

    document.querySelectorAll("input[type='number']").forEach(element => element.addEventListener('keyup', (e) => {
      if (e.keyCode !== 8) {
        e.target.value = !isNaN(e.target.value) ? e.target.value : 1
        e.target.value = Math.min(Math.max(e.target.value, 1), 9)
      }
    }))
  </script>
  <script src="sudoku.js"></script>
  <script src="/main.js"></script>
</html>